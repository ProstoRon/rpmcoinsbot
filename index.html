<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPMcoinbot</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB2FxqryBDE7Q0SB-pt8v23Tpusg2xAFHU",
            authDomain: "rpmcoins-48e4f.firebaseapp.com",
            databaseURL: "https://rpmcoins-48e4f-default-rtdb.firebaseio.com",
            projectId: "rpmcoins-48e4f",
            storageBucket: "rpmcoins-48e4f.appspot.com",
            messagingSenderId: "764805793058",
            appId: "1:764805793058:web:83ff3c1114bbd0fbd9d17b",
            measurementId: "G-S2PRPR80F5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Function to get URL parameter
        function getParameterByName(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Fetch user data from Firebase
        async function fetchUserData(userId) {
            const userRef = ref(database, `users/${userId}`);
            try {
                const snapshot = await get(userRef);
                if (snapshot.exists()) {
                    return snapshot.val();
                } else {
                    throw new Error('User not found');
                }
            } catch (error) {
                console.error('Error fetching user data:', error);
                return null;
            }
        }

        // Display user data on the page
        async function displayUserData() {
            const userId = getParameterByName('source');
            if (userId) {
                const userData = await fetchUserData(userId);
                if (userData) {
                    document.getElementById('user-id').innerText = `User ID: ${userData.user_id}`;
                    document.getElementById('clicks').innerText = `Clicks: ${userData.clicks}`;
                    document.getElementById('energy').innerText = `Energy: ${userData.energy}`;
                    document.getElementById('total-clicks').innerText = `Total Clicks: ${userData.totalClicks}`;
                } else {
                    document.getElementById('user-info').innerText = 'User not found.';
                }
            } else {
                document.getElementById('user-info').innerText = 'No user ID provided.';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', displayUserData);
    </script>
</head>
<body>
    <div id="user-info">
        <p id="user-id"></p>
        <p id="clicks"></p>
        <p id="energy"></p>
        <p id="total-clicks"></p>
    </div>
</body>
</html>
